CREATE DATABASE dbservishp2410031;
USE dbservishp2410031;

CREATE TABLE jenis2410031 (
  jenisid2410031 CHAR(3) PRIMARY KEY,
  jenisnama2410031 VARCHAR(100)
)ENGINE INNODB;
INSERT INTO jenis2410031 VALUES ("001","TUNAI");
INSERT INTO jenis2410031 VALUES ("002","TRANSFER");
INSERT INTO jenis2410031 VALUES ("003","E-WALLET");

CREATE TABLE item2410031 (
  itemid2410031 CHAR(5) PRIMARY KEY,
  itemnama2410031 VARCHAR(200),
  itemjenisid2410031 CHAR(5),
  itemharga2410031 DOUBLE,
  itemketerangan2410031 VARCHAR(100),
  FOREIGN KEY (itemjenisid2410031) REFERENCES jenis2410031(jenisid2410031)
)ENGINE INNODB;

CREATE TABLE pelanggan2410031 (
  pelangganid2410031 CHAR(5) PRIMARY KEY,
  pelanggannama2410031 VARCHAR(100),
  pelangganalamat2410031 VARCHAR(200),
  pelanggannohp2410031 VARCHAR(50),
  pelanggannowa2410031 VARCHAR(20)
)ENGINE INNODB;

CREATE TABLE merk2410031 (
  merkid2410031 CHAR(3) PRIMARY KEY,
  merknama2410031 VARCHAR(100),
  merkket2410031 VARCHAR(200)
)ENGINE INNODB;

CREATE TABLE servis2410031 (
  servisid2410031 CHAR(10) PRIMARY KEY,
  servistglmasuk2410031 DATETIME,
  servispelangganid2410031 CHAR(5),
  servismerkid2410031 CHAR(3),
  servistipehp2410031 VARCHAR(100),
  servisiomei2410031 VARCHAR(100),
  serviskeluhan2410031 VARCHAR(100),
  servispassword2410031 VARCHAR(100),
  servisteknisi2410031 CHAR(30),
  servistatus2410031 VARCHAR(20),
  FOREIGN KEY (servispelangganid2410031) REFERENCES pelanggan2410031(pelangganid2410031) ON UPDATE CASCADE,
  FOREIGN KEY (servismerkid2410031) REFERENCES merk2410031(merkid2410031) ON UPDATE CASCADE,
  FOREIGN KEY (servisteknisi2410031) REFERENCES users2410031(username2410031) ON UPDATE CASCADE
)ENGINE INNODB;

CREATE TABLE detailservis2410031 (
  detailservisid2410031 INT PRIMARY KEY AUTO_INCREMENT,
  detailservisservisid2410031 CHAR(10),
  detailservisitemid2410031 CHAR(5),
  detailservisharga2410031 DOUBLE,
  detailservisdiskon2410031 DOUBLE,
  detailservissubtotal2410031 DOUBLE,
  FOREIGN KEY (detailservisservisid2410031) REFERENCES servis2410031(servisid2410031),
  FOREIGN KEY (detailservisitemid2410031) REFERENCES item2410031(itemid2410031)
)ENGINE INNODB;

CREATE TABLE metode2410031 (
  metodeid2410031 CHAR(3) PRIMARY KEY,
  metodenama2410031 VARCHAR(100)
)ENGINE INNODB;
INSERT INTO metode2410031 VALUES ("001","TUNAI");
INSERT INTO metode2410031 VALUES ("002","TRANSFER");
INSERT INTO metode2410031 VALUES ("003","E-WALLET");


CREATE TABLE users2410031 (
  username2410031 CHAR(30) PRIMARY KEY,
  userfullname2410031 VARCHAR(100),
  userhp2410031 VARCHAR(30),
  userrole2410031 INT,
  userstatus2410031 INT,
  userpass2410031 CHAR(32)
)ENGINE INNODB;
INSERT INTO users2410031 VALUES ("Bram","Bram Setiawan","083175883258","1","1",MD5('123'));
INSERT INTO users2410031 VALUES ("Salsa","Salsabila Aftagenisa","085272240570","2","1",MD5('123'));
INSERT INTO users2410031 VALUES ("Bastian","Bastian Bramasta","089623112137","3","0",MD5('123'));

CREATE TABLE bayar2410031 (
  bayarid2410031 CHAR(30) PRIMARY KEY,
  bayartanggal2410031 DATETIME,
  bayarservisid2410031 CHAR(10),
  bayarsubtotal2410031 DOUBLE,
  bayardiskon2410031 DOUBLE,
  bayartotal2410031 DOUBLE,
  bayarmetodeid2410031 CHAR(3),
  bayarkasir2410031 CHAR(30),
  FOREIGN KEY (bayarservisid2410031) REFERENCES servis2410031(servisid2410031) ON UPDATE CASCADE,
  FOREIGN KEY (bayarmetodeid2410031) REFERENCES metode2410031(metodeid2410031) ON UPDATE CASCADE,
  FOREIGN KEY (bayarkasir2410031) REFERENCES users2410031(username2410031) ON UPDATE CASCADE
)ENGINE INNODB;
